<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>End-to-end data analysis pipeline</title>
    <meta charset="utf-8" />
    <meta name="author" content=" Yikai Zhao   <span>&lt;i class="fab  fa-twitter faa-vertical animated "&gt;&lt;/i&gt;&amp;nbsp;@zhao_yikai</span>" />
    <link href="libs/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome/js/fontawesome-all.min.js"></script>
    <link rel="stylesheet" href="assets/shinobi.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninjutsu.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninpo.css" type="text/css" />
    <link rel="stylesheet" href="assets/default.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# End-to-end data analysis pipeline
## An visualization journey
### <br>Yikai Zhao   <span>&lt;i class="fab  fa-twitter faa-vertical animated "&gt;&lt;/i&gt;&amp;nbsp;@zhao_yikai</span>
### Looking for a full time position as Data scientist
### 25-Oct-2019    <span>&lt;i class="fas  fa-link faa-ring animated " style=" color:white;"&gt;&lt;/i&gt;&amp;nbsp;ykzhao.com</span>

---


class: center, middle

&lt;img src="images/data_scientist.png" width="25%"&gt;





---


class: split-60 white 

.column.bg-main1[.content.vmiddle[
# Overview
&lt;br&gt;
### Data visualization is important to

* #### draw insights amid the data analysis
* #### convey those insights to customers &amp; decision makers


### This powerpoint aims to use .orange[visualizations] to showcase the process of data analysis from data cleaning to final model interpretation

### I will use the House Prices dataset from [Kaggle](https://www.kaggle.com/c/house-prices-advanced-regression-techniques)


### The information about this dataset could be glanced from right


]]



.column.bg-main4[.content.vmiddle.center[
&lt;center&gt;





```r
# The dimention of the data are
dim(train)
dim(test)
```


```r
[1] 1460   80
[1] 1459   80
```

### There are 79 predictors and we will use them to predict our response variable .teal[SalePrice] of houses. 
]]

---
class: bg-main1 center middle hide-slide-number

.reveal-text[.pad1[
.font4[There will be three major parts
]
]]


---
layout: true

class: split-three 

.column.bg-main1[.content[
#  Data exploration and manipulation 
### This step involves dealing of .orange[missing data] and .teal[outliers]:
  + ### missing at random or missing with pattern(s)
  + ### impute or discard them
  
### View the distribution of variables and their relaitonships
### Deal with skewed variables
### Feature engineering 

]]
.column.bg-main1[.content[
# Predicative modeling

## Choose the appropriate modeling architecture(s)
## .orange[hyperparamerter tuning] 
## .teal[ensembling] the models for better generalibility
]]
.column.bg-main1[.content[
# Results interpretation

## Interpretable machine learning
## .orange[Shapley] values to attribute contributions to variables
## View interactions between variables
]]

---

class: gray-col2 gray-col3
count: false

---

class: gray-col3
count: false

---

count: false

---
layout: false

class: bg-main1, center, middle

# Part 1: Data exploration and manipulation

---

layout: false
class: split-50 
.column.bg-main1[.content.vmiddle[

# Which numerical variables are important to explore first

## We could find variables with a correlation of at least 0.5 with our dependent variable .orange[SalePrice]

]]

.column.bg-main5[.content.vmiddle.center[




```r
#sorted on decreasing correlations with SalePrice
corrplot.mixed(cor_numVar, tl.col="black", tl.pos = "lt")
```

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-5-1.png" width="80%" height="40%" /&gt;


]]


---

class: split-50

.column.bg-main1[.content.vmiddle[
# We could visualize the relationship between .pink[GrLivArea] and .orange[SalePrice]
From the plot, the 524th and 1299th house are potential outliers that deserve special attention. We furter insepct the OverallQual of these two hourse

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SalePrice &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; GrLivArea &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; OverallQual &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Neighborhood &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 524 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 184750 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4676 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Edwards &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 1299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5642 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Edwards &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

These two houses are all of the highest quality however located at a "normal" .tile[neighborhood], which might explain the low price. Thus we keep these two houses in the dataset. 


]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-7-1.png" width="85%" /&gt;


]]

---
class: bg-main1, center, middle


###  In the next slide, we visualize the relationship between .yellow[OverallQual] and .pink[SalePrice] in steps.

# We could customize the visualization with great flexibility to the businuess needs. 

---











class: split-40
count: false

.column[.content[

```r
*# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) 
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_4-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
* geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_5-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
* geom_point(aes(y = SalePrice, color = factor(OverallQual)),
*            position = position_jitter(width = .15), size = .5, alpha = 1)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_7-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
* geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_8-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
* geom_point(data = sumld, aes(x = factor(OverallQual), y = mean),
*            position = position_nudge(x = 0.3), size = 2.5)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_10-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
* geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean),
*               position = position_nudge(x = 0.3), width = 0)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_12-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
* expand_limits(x = 5.25)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_13-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
* guides(fill = FALSE, color = F)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_14-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
* scale_color_manual(values = getPalette)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_15-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
* scale_fill_manual(values = getPalette)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_16-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
* coord_trans(y = 'log2')
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_17-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
* labs( y = 'SalePrice', x = 'OverallQual' )
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_18-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
* annotate("text", x = 4, y = 3e+05, label = c('outlier?'))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_19-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
* labs(title = "Relationship between SalesPrice and OverallQual")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_20-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
* labs(subtitle = "Data Source: House Prices Competition in Kaggle",
*      caption = "Vis: @zhao_yikai with ggplot")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_22-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
* theme_bw()
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_23-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
* theme(plot.subtitle = element_text(color = 'grey50'))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_24-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
* theme(panel.border = element_blank())
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_25-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
* theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_26-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
* theme(panel.grid.minor = element_blank())
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_27-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
  theme(panel.grid.minor = element_blank())+
* theme(axis.line.x = element_line(color = 'darkgrey', size = 0.5))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_28-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
# We could visualize the distribution
# of variable OverallQual in a rainplot
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
  theme(panel.grid.minor = element_blank())+
  theme(axis.line.x = element_line(color = 'darkgrey', size = 0.5))+
* scale_y_continuous(breaks= seq(0, 800000, by=100000), labels =scales::comma)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_29-1.png" width="80%" /&gt;
]]







---

class: split-50  

.column.bg-main1[.content.vmiddle[

# Visualize the relaionship between .orange[Year] and .teal[SalePrice] by .pink[OverallQual]

The dotted line is roughly the time of the economic crisis happend at the end of 2017.
We could see clearly that the high quality (10) houses get influenced the most.


]]


.column.bg-main5[.content.vmiddle.center[




&lt;img src="index_yikai_files/figure-html/unnamed-chunk-10-1.png" width="85%" /&gt;



]]


---


class: split-50  

.column.bg-main1[.content.vmiddle[

# Use .pink[principle components] of numerical variables to detect extreme obervations

]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-29-1.png" width="80%" /&gt;


]]


---

class: split-50 

.column.bg-main1[.content.vmiddle[

# Which .orange[categorical variables] are important to explore

## We could find them through .cyan[Random Forest] feature importance permutation test. 

]]

.column.bg-main5[.content.vmiddle.center[

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-12-1.png" width="90%" /&gt;



]]


---

class: split-50  

.column.bg-main1[.content.vmiddle[
# We could view the .pink[Neighborhood] variable in terms of the median .orange[SalePrice]


]]

.column.bg-main5[.content.vmiddle.center[

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-13-1.png" width="85%" /&gt;



]]

---




class: split-50  

.column.bg-main1[.content.vmiddle[

# View the median .pink[qualities] of houses from different category of .orange[neighborhood]

 

]]

.column.bg-main5[.content.vmiddle.center[
&lt;center&gt;



&lt;img src="index_yikai_files/figure-html/unnamed-chunk-31-1.png" width="90%" /&gt;


]]




---
class: split-60  

.column.bg-main1[.content.vmiddle[

# Plotting the missingness in that dataset 

###.orange[white lines] indicate missing values in the corresponding variable
### Turns out some missingness indicate the .orange[absence] of that feature (e.g. a pool or fense), which we could impurte as a .pink[None] type 
### some are data misentry and we need to .yellow[find them out!] 


]]

.column.bg-main5[.content.vmiddle.center[
&lt;center&gt;






&lt;img src="index_yikai_files/figure-html/unnamed-chunk-16-1.png" width="90%" height="75%" /&gt;


]]

---

class: split-40

.column.bg-main1[.content.vmiddle[
## Among the NA's, some are due to misentry of data

&lt;br&gt;

### e.g. While most NA's in .orange[Garage] related variables indicates a lack of a garage, 2 houses have contradictory values in those variables



]]


.column.bg-main4[.content.vmiddle[





```r
GarageCars GarageArea GarageType GarageCond GarageQual GarageFinish
2127          1        360     Detchd       &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;
2577         NA         NA     Detchd       &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;
```

&lt;br&gt;
Given no other variables could predict the garage variables, I think house 2127 indeed has a garage thus the rest of NA's are imputed with the mode.

```r
all$GarageCond[2127] &lt;- names(sort(-table(all$GarageCond)))[1]
all$GarageQual[2127] &lt;- names(sort(-table(all$GarageQual)))[1]
all$GarageFinish[2127] &lt;- names(sort(-table(all$GarageFinish)))[1]
```

However, house 2577 does not seem to have a garage but with a wrong input of data in .teal[GarageType]. Thus all garage varialbes have been imputed into values indicating there is no garage. 




]]
---

class: split-50

.column.bg-main1[.content.vmiddle[

# We also need to code the character variables into numbers

## Need to consider if the variables is .orange[categorical] or .teal[ordinal]

### If there is no inherent order within the variable, it will be coded as a factor variable
]]

.column.bg-main4[.content.vmiddle[

### For example, the .orange[heating] variable has the following levels:



```r
   Floor    Floor Furnace
   GasA Gas forced warm air furnace
   GasW Gas hot water or steam heat
   Grav Gravity furnace 
   OthW Hot water or steam heat other than gas
   Wall Wall furnace
```

### It will be coded as:


```r
all$Heating &lt;- as.factor(all$Heating)
table(all$Heating)
```


```r
1    2    3    4    5 
3    92   857  474  1493
```



]]

---

class: split-50

.column.bg-main1[.content.vmiddle[

# We also need to code the character variables into numbers

## Need to consider if the variables is .orange[categorical] or .teal[ordinal]

### If there is an inherent order within the variable, it will be coded as integers indicating the inherent order
]]

.column.bg-main4[.content.vmiddle[

### For example, the .pink[HeatingQC] variable has the following levels:




```r
   heating    heating_qual
      Ex       Excellent
      Gd            Good
      TA Average/Typical
      Fa            Fair
      Po            Poor
```

### It will be coded as:


```r
Qualities &lt;- c('None' = 0, 'Po' = 1, 
               'Fa' = 2, 'TA' = 3, 
               'Gd' = 4, 'Ex' = 5)
all$HeatingQC&lt;-as.integer(revalue(all$HeatingQC, Qualities))
```
]]


```r
1    2    3    4    5 
3   92  857  474 1493
```


---


class: split-50

.column.bg-main1[.content.vmiddle[
# Dealing with skewness of response variable
## For example, the response variable SalePrice is highly skewed
## We would log transform this variable

]]


.column.bg-main5[.content.vmiddle[


```r
SalePrice &lt;- log(all$SalePrice)
```





]]
---
class: bg-main1, center, middle

# Part 2: Modeling of the data

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
