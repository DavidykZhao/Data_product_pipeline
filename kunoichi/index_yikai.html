<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Data analysis pipeline</title>
    <meta charset="utf-8" />
    <meta name="author" content=" Yikai Zhao    <span>&lt;i class="fab  fa-twitter faa-vertical animated " style=" color:white;"&gt;&lt;/i&gt;&amp;nbsp;@zhao_yikai</span>" />
    <link href="libs/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome/js/fontawesome-all.min.js"></script>
    <link rel="stylesheet" href="assets/shinobi.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninjutsu.css" type="text/css" />
    <link rel="stylesheet" href="assets/ninpo.css" type="text/css" />
    <link rel="stylesheet" href="assets/default.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data analysis pipeline
## An visualization journey
### <br>Yikai Zhao    <a href="https://twitter.com/zhao_yikai"><span>&lt;i class="fab  fa-twitter faa-vertical animated " style=" color:white;"&gt;&lt;/i&gt;&amp;nbsp;@zhao_yikai</span></a>
### Looking for a full time position as Data scientist
### 25-Oct-2019    <a href="ykzhao.com"><span>&lt;i class="fas  fa-link faa-ring animated " style=" color:white;"&gt;&lt;/i&gt;&amp;nbsp;ykzhao.com</span></a>

---


class: center, middle

&lt;img src="images/data_scientist.png" width="25%"&gt;





---


class: split-60 white 

.column.bg-main1[.content.vmiddle[
# Overview
&lt;br&gt;

## This powerpoint aims to use .orange[visualizations] to showcase the process of data analysis

### Specific details within the process are stripped if there is no good way for visualization such as missing value imputation and model training

### I will use the House Prices dataset from [Kaggle](https://www.kaggle.com/c/house-prices-advanced-regression-techniques)




]]



.column.bg-main4[.content.vmiddle.center[
&lt;center&gt;




### The information about this dataset:



```r
# The dimention of the data are
dim(train)
dim(test)
```



```r
[1] 1460   80
[1] 1459   80
```

### There are 79 predictors and we will use them to predict our response variable .teal[SalePrice] of houses. 
]]

---
class: bg-main1 center middle hide-slide-number

.reveal-text[.pad1[
.font4[ There will be two major parts
]
]]


---
layout: true

class: split-two 

.row.bg-main1[.content.vmiddle[
#  Data exploration and manipulation 
### This step involves visualizing the relationship between .orange[variables], .teal[missing values] and .pink[possible extreme values]  



]]
.row.bg-main1[.content.vmiddle[
#  Modeling and Model interpretation

### This step involves fitting different models and interpret the .orange[feature importance]


]]


---

class: fade-row2
count: false

---

count: false


---
layout: false

class: bg-main1, center, middle

# Part 1: Data exploration and manipulation

---

layout: false
class: split-50 
.column.bg-main1[.content.vmiddle[

# Which .blue[numerical] variables are important to explore first

## We could find variables with a correlation of at least 0.5 with our dependent variable .deep-orange[SalePrice]

]]

.column.bg-main5[.content.vmiddle.center[




```r
#sorted on decreasing correlations with SalePrice
corrplot.mixed(cor_numVar, tl.col="black", tl.pos = "lt")
```

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-5-1.png" width="80%" height="40%" /&gt;


]]


---

class: split-50

.column.bg-main1[.content.vmiddle[
# We could visualize the relationship between .pink[GrLivArea] and .orange[SalePrice]
From the plot, the 524th and 1299th house are potential outliers that deserve special attention. We furter insepct the OverallQual of these two hourse

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SalePrice &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; GrLivArea &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; OverallQual &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Neighborhood &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 524 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 184750 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4676 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Edwards &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 1299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5642 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Edwards &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

These two houses are all of the highest quality however located at a "normal" .tile[neighborhood], which might explain the low price. Thus we keep these two houses in the dataset. 


]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-7-1.png" width="85%" /&gt;


]]

---
class: bg-main1, center, middle


###  In the next slide, we visualize the relationship between .orange[OverallQual] and .deep-orange[SalePrice] in steps.

# We could customize the visualization with great .orange[flexibility] to the businuess needs. 

---











class: split-40
count: false

.column[.content[

```r
 #&lt;&lt;
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) 
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_3-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
* geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_4-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
* geom_point(aes(y = SalePrice, color = factor(OverallQual)),
*            position = position_jitter(width = .15), size = .5, alpha = 1)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_6-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
* geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_7-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
* geom_point(data = sumld, aes(x = factor(OverallQual), y = mean),
*            position = position_nudge(x = 0.3), size = 2.5)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_9-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
* geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean),
*               position = position_nudge(x = 0.3), width = 0)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_11-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
* expand_limits(x = 5.25)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_12-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
* guides(fill = FALSE, color = F)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_13-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
* scale_color_manual(values = getPalette)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_14-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
* scale_fill_manual(values = getPalette)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_15-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
* coord_trans(y = 'log2')
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_16-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
* labs( y = 'SalePrice', x = 'OverallQual' )
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_17-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
* annotate("text", x = 4, y = 3e+05, label = c('outlier?'))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_18-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
* labs(title = "Relationship between SalesPrice and OverallQual")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_19-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
* labs(subtitle = "Data Source: House Prices Competition in Kaggle",
*      caption = "Vis: @zhao_yikai with ggplot")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_21-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
* theme_bw()
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_22-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
* theme(plot.subtitle = element_text(color = 'grey50'))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_23-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
* theme(panel.border = element_blank())
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_24-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
* theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_25-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
* theme(panel.grid.minor = element_blank())
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_26-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
  theme(panel.grid.minor = element_blank())+
* theme(axis.line.x = element_line(color = 'darkgrey', size = 0.5))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_27-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(data = training_data, 
  aes(x = factor(OverallQual), y = SalePrice, fill=factor(OverallQual))) +
  geom_flat_violin(position = position_nudge(x = .2, y = 0), trim = TRUE, alpha = .8, scale = "width") +
  geom_point(aes(y = SalePrice, color = factor(OverallQual)), 
             position = position_jitter(width = .15), size = .5, alpha = 1) +
  geom_boxplot(width = .1, outlier.shape = NA, alpha = 0.5) +
  geom_point(data = sumld, aes(x = factor(OverallQual), y = mean), 
             position = position_nudge(x = 0.3), size = 2.5) +
  geom_errorbar(data = sumld, aes(ymin = lower, ymax = upper, y = mean), 
                position = position_nudge(x = 0.3), width = 0)+
  expand_limits(x = 5.25) +
  guides(fill = FALSE, color = F) +
  scale_color_manual(values = getPalette) +
  scale_fill_manual(values = getPalette) +
  coord_trans(y = 'log2') +
  labs( y = 'SalePrice', x = 'OverallQual' ) +
  annotate("text", x = 4, y = 3e+05, label = c('outlier?'))+
  labs(title = "Relationship between SalesPrice and OverallQual")+
  labs(subtitle = "Data Source: House Prices Competition in Kaggle", 
       caption = "Vis: @zhao_yikai with ggplot")+
  theme_bw()+
  theme(plot.subtitle = element_text(color = 'grey50'))+
  theme(panel.border = element_blank())+
  theme(plot.title = element_text(lineheight = .8, face = "bold", size = 16))+
  theme(panel.grid.minor = element_blank())+
  theme(axis.line.x = element_line(color = 'darkgrey', size = 0.5))+
* scale_y_continuous(breaks= seq(0, 800000, by=100000), labels =scales::comma)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_rainplot_28-1.png" width="80%" /&gt;
]]







---

class: split-50  

.column.bg-main1[.content.vmiddle[

# Visualize the relationship between .orange[Year] and .teal[SalePrice] by .pink[OverallQual]

The dotted line is roughly the time when the economic crisis happend at the end of 2017.
We could see clearly that the high quality (10) houses get influenced the most.


]]


.column.bg-main5[.content.vmiddle.center[




&lt;img src="index_yikai_files/figure-html/unnamed-chunk-10-1.png" width="85%" /&gt;



]]


---



class: split-50  

.column.bg-main1[.content.vmiddle[
# We could view the median SalePrie in 3 .teal[wealthy neighborhoods] across years

]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-24-1.png" width="90%" /&gt;

  
  
]]


---


class: split-50  

.column.bg-main1[.content.vmiddle[

# Use .pink[principle components] of numerical variables to detect extreme obervations

]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-25-1.png" width="80%" /&gt;


]]


---

class: bg-main1, center, middle

# Which .orange[categorical variables] are important to explore

## We could find them via .orange[Random Forest] feature importance.

---










class: split-40
count: false

.column[.content[

```r
 #&lt;&lt;
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) 
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_2-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
* geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) )
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_3-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
* geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) )
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_4-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
* coord_flip()
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_5-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
* theme(
*   legend.position="none"
* )
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_8-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
* geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_9-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
* xlab("")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_10-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
* ylab("Value of Y")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_11-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
* ggtitle("Feature importance via Random Forrest")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_12-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
* labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_13-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
* theme_bw()
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_14-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
* yikai_labels
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_15-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
* yikai_themes
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_16-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
* ylim(0, 22)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_17-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
  ylim(0, 22)+
* theme(plot.title.position = "plot")
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_18-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
  ylim(0, 22)+
  theme(plot.title.position = "plot")+
* annotate("text", x=9, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="Neighborhood")]*1.1,
*            label= paste('Important categorical variable'),
*            color="orange", size=3.4, angle=0, fontface="bold", hjust=0)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_21-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
  ylim(0, 22)+
  theme(plot.title.position = "plot")+
  annotate("text", x=9, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="Neighborhood")]*1.1, 
             label= paste('Important categorical variable'),
             color="orange", size=3.4, angle=0, fontface="bold", hjust=0)+
* annotate("text", x=6, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="MSSubClass")]*1.2,
*          label= paste('Another important categorical variable'),
*          color="orange", size=3.4, angle=0, fontface="bold", hjust=0)
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_24-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
  ylim(0, 22)+
  theme(plot.title.position = "plot")+
  annotate("text", x=9, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="Neighborhood")]*1.1, 
             label= paste('Important categorical variable'),
             color="orange", size=3.4, angle=0, fontface="bold", hjust=0)+
  annotate("text", x=6, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="MSSubClass")]*1.2, 
           label= paste('Another important categorical variable'),
           color="orange", size=3.4, angle=0, fontface="bold", hjust=0)+
* theme(axis.title.x = element_text(hjust=-0.06))
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_25-1.png" width="80%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(imp_DF[1:10,], aes(x=reorder(Variables, MSE), y= MSE, label = round(MSE, 1))) +
  geom_segment( aes(x=reorder(Variables, MSE), xend=reorder(Variables, MSE), y=0, yend= MSE ), color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 1.5, 0.7) ) +
  geom_point( color=ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), "orange", "grey"), size=ifelse(imp_DF[1:10,]$Variables  %in% c("Neighborhood", "MSSubClass"), 11, 7) ) +
  coord_flip() +
  theme(
    legend.position="none"
  ) +
  geom_text(color = "white", size = ifelse(imp_DF[1:10,]$Variables %in% c("Neighborhood", "MSSubClass"), 3.5, 2.5))+
  xlab("") +
  ylab("Value of Y") +
  ggtitle("Feature importance via Random Forrest")+
  labs(x = 'Variables',y= '% increase MSE if variable is randomly permuted')+
  theme_bw()+
  yikai_labels +
  yikai_themes+
  ylim(0, 22)+
  theme(plot.title.position = "plot")+
  annotate("text", x=9, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="Neighborhood")]*1.1, 
             label= paste('Important categorical variable'),
             color="orange", size=3.4, angle=0, fontface="bold", hjust=0)+
  annotate("text", x=6, y=imp_DF[1:10,]$MSE[which(imp_DF[1:10,]$Variables=="MSSubClass")]*1.2, 
           label= paste('Another important categorical variable'),
           color="orange", size=3.4, angle=0, fontface="bold", hjust=0)+
  theme(axis.title.x = element_text(hjust=-0.06))+
* theme(panel.grid.major.y = element_blank())
```
]]
.column[.content.center[
&lt;img src="index_yikai_files/figure-html/output_lollipop_26-1.png" width="80%" /&gt;
]]



---

class: split-50  

.column.bg-main1[.content.vmiddle[
# We could view the .pink[Neighborhood] variable in terms of the median .cyan[SalePrice]


]]

.column.bg-main5[.content.vmiddle.center[

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-14-1.png" width="85%" /&gt;



]]

---




class: split-50  

.column.bg-main1[.content.vmiddle[

# View the median .pink[qualities] of houses from different categories of .orange[neighborhood]

 

]]

.column.bg-main5[.content.vmiddle.center[
&lt;center&gt;



&lt;img src="index_yikai_files/figure-html/unnamed-chunk-28-1.png" width="90%" /&gt;


]]




---
class: split-50  

.column.bg-main1[.content.vmiddle[

# Plotting the missing values in the dataset 




]]

.column.bg-main5[.content.vmiddle.center[
&lt;center&gt;






&lt;img src="index_yikai_files/figure-html/unnamed-chunk-17-1.png" width="90%" height="75%" /&gt;


]]


---
class: bg-main1, center, middle

# Part 2: Modeling and interpretation
---


class: split-50

.column.bg-main1[.content.vmiddle[

# Through a refitted LASSO we could view the feature importance by the .teal[size of the coefficients]. 

Note: The independent numerical variables have been mean centerred and scaled, dependent variable has been log transformed. 

]]


.column.bg-main5[.content.vmiddle.center[





&lt;img src="index_yikai_files/figure-html/unnamed-chunk-29-1.png" width="90%" /&gt;


]]



---






class: split-50

.column.bg-main1[.content.vmiddle[

# XGBoost model was used to achieve great .orange[predicability] and .orange[explanability], 
Used bayesian hyperparameter tuning to find the optimal combination of hyperparamters of the XGBoost model


]]

.column.bg-main5[.content.vmiddle.center[


&lt;img src="index_yikai_files/figure-html/unnamed-chunk-30-1.png" width="90%" /&gt;



]]



---


class: split-50

.column.bg-main1[.content.vmiddle[

# We could visualize the global importance of features &lt;sup&gt;1&lt;/sup&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


.footnote[

[1]  This powerpoint is to show the visualizations, not to interpret the results. For more details, please refer [here](https://github.com/slundberg/shap)

]

]]



.column.bg-main5[.content.vmiddle.center[




&lt;img src="index_yikai_files/figure-html/unnamed-chunk-32-1.png" width="90%" /&gt;



]]




---


class: split-50

.column.bg-main1[.content.vmiddle[

# We could also visualize the .purple[SHAP] values of an individual variable



]]



.column.bg-main5[.content.vmiddle.center[




&lt;img src="index_yikai_files/figure-html/unnamed-chunk-34-1.png" width="90%" /&gt;



]]









---




class: split-50


.column.bg-main1[.content.vmiddle[

# We could also visualize the interactions between .purple[TotalSqFeet] and .orange[OverallQual] via SHAP values


]]



.column.bg-main5[.content.vmiddle[

&lt;img src="index_yikai_files/figure-html/unnamed-chunk-35-1.png" width="90%" /&gt;

]]



---



class: split-50

.column.bg-main1[.content.vmiddle[

# We could also visualize the SHAP &lt;sup&gt;1&lt;/sup&gt; contribution of each .yellow[feature] within each .blue[ data point].


&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

.footnote[
[1] For the interpretation of the plot, I would recommend reading [this](https://christophm.github.io/interpretable-ml-book/shap.html), or I could explain it if needed during an interview :)

]

]]


.column.bg-main5[.content.vmiddle.center[

&lt;img src="index_yikai_files/figure-html/forceplot-1.png" width="90%" /&gt;

]]


---




class: bg-main1, center, middle

# This visualization project is built upon the great works of others:

### [House prices: Lasso, XGBoost, and a detailed EDA](https://www.kaggle.com/erikbruin/house-prices-lasso-xgboost-and-a-detailed-eda)

### [ggplot_flipbook](https://github.com/EvaMaeRey/ggplot_flipbook)

### [Xaringan](https://github.com/yihui/xaringan)

### [remark.js Ninja theme](https://github.com/emitanaka/ninja-theme)

&lt;br&gt;

# You coul find the source code of this project at [<span>&lt;i class="fab  fa-github faa-vertical animated "&gt;&lt;/i&gt;</span> here](https://github.com/DavidykZhao/Data_product_pipeline) 


---

class: bg-main1, center, middle


.deep-orange[ 

# Thanks! 

]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
